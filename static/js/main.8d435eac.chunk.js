(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{14:function(e,t,n){e.exports={item:"ImageGalleryItem_item__26F25",image:"ImageGalleryItem_image__32_jr"}},26:function(e,t,n){e.exports={gallery:"ImageGallery_gallery__gboaM"}},27:function(e,t,n){e.exports={button:"Button_button__3QF_k"}},29:function(e,t,n){e.exports={loader:"ModalLoader_loader__8XFZM"}},30:function(e,t,n){e.exports={App:"App_App__aOmNj"}},31:function(e,t,n){e.exports={overlay:"Overlay_overlay__3DDtl"}},32:function(e,t,n){e.exports={modal:"Modal_modal__P3_V5"}},39:function(e,t,n){},8:function(e,t,n){e.exports={searchbar:"Searchbar_searchbar__jo466",form:"Searchbar_form__XuKjc",button:"Searchbar_button__MhnaU",input:"Searchbar_input__2C4aO"}},81:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(5),c=n.n(a),o=(n(39),n(15)),u=n(4),i=n(7),s=n.n(i),l=n(16),f=n(13),j=n(25),b=n.n(j),m=n(34),p="https://pixabay.com/api",d={key:"24268385-a09efe65560efa0dec086fa93",image_type:"photo",orientation:"horizontal",editors_choice:"true",safesearch:"true",per_page:"12"},h=["webformatURL","largeImageURL"],O="There are no matching images.",g="You've reached the end of search results.",_={page:1,totalHits:null,query:null},x=function(){var e=Object(f.a)(s.a.mark((function e(){var t,n,r,a,c,o,u,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"cat",n=i.length>1&&void 0!==i[1]?i[1]:1,_.page=n,r=Object(l.a)({q:t,page:n},d),e.next=6,b.a.get(p,{params:r});case 6:return a=e.sent,c=a.data,o=C(c),u=N(o),w(c.totalHits),_.totalHits=c.totalHits,_.query=t,e.abrupt("return",k(u));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(f.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(_.page),e.next=3,x(_.query,_.page+1);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(e){if(e*d.per_page>=_.totalHits)throw new Error(g)},w=function(e){if(0===e)throw new Error(O)},k=function(e){return new Promise((function(t){return t(e)}))},C=function(e){return e.hits.map(S)},S=function(e){return h.reduce((function(t,n){return t[n]=e[n],t}),{})},N=function(e){return e.map((function(e){return Object(l.a)({id:Object(m.a)()},e)}))},I=n(8),E=n.n(I),L=n(33),q=n(1),M=function(e){var t=e.onSubmit,n=Object(r.useState)(""),a=Object(u.a)(n,2),c=a[0],o=a[1];return Object(q.jsx)("header",{className:E.a.searchbar,children:Object(q.jsxs)("form",{className:E.a.form,onSubmit:function(e){e.preventDefault(),t(c)},children:[Object(q.jsx)("button",{type:"submit",className:E.a.button,children:Object(q.jsx)(L.a,{size:20})}),Object(q.jsx)("input",{className:E.a.input,onChange:function(e){o(e.target.value)},value:c,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})},R=n(14),H=n.n(R),U=function(e){var t=e.onClick,n=e.url;return Object(q.jsx)("li",{onClick:t,className:H.a.item,children:Object(q.jsx)("img",{className:H.a.image,src:n,alt:""})})},A=n(26),F=n.n(A);var P=function(e){var t=e.onItemClick,n=e.images;return Object(q.jsx)("ul",{className:F.a.gallery,children:n.map((function(e){var n=e.id,r=e.webformatURL;return Object(q.jsx)(U,{onClick:function(){return t(n)},url:r},n)}))})},D=n(27),G=n.n(D),T=function(e){var t=e.onClick;return Object(q.jsx)("button",{className:G.a.button,type:"button",onClick:t,children:"Load more"})},z=n(28),B=n.n(z),J=(n(80),n(29)),X=n.n(J),Y=function(e){var t=e.color,n=void 0===t?"#fff":t,c=Object(r.useRef)(document.querySelector("#loader")),o=Object(q.jsx)("div",{className:X.a.loader,children:Object(q.jsx)(B.a,{type:"Oval",color:n,height:100,width:100,timeout:0})});return Object(a.createPortal)(o,c.current)},K=n(30),Q=n.n(K),V=n(31),Z=n.n(V),W=function(e){var t=e.onOverlayClick,n=e.component;return Object(q.jsx)("div",{onClick:function(e){e.target===e.currentTarget&&t()},className:Z.a.overlay,children:n})},$=n(32),ee=n.n($),te=function(e){var t=e.url,n=e.onClose,c=Object(r.useRef)(document.querySelector("#modal"));Object(r.useEffect)((function(){return window.addEventListener("keydown",o),function(){return window.removeEventListener("keydown",o)}}));var o=function(e){"Escape"===e.code&&n()},u=Object(q.jsxs)("div",{className:ee.a.modal,children:[Object(q.jsx)(Y,{}),Object(q.jsx)("img",{src:t,alt:""})]});return Object(a.createPortal)(Object(q.jsx)(W,{onOverlayClick:n,component:u}),c.current)},ne="empty",re="loading",ae="normal",ce="end",oe="modal",ue=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(re),i=Object(u.a)(c,2),s=i[0],l=i[1],f=Object(r.useState)(""),j=Object(u.a)(f,2),b=j[0],m=j[1],p=Object(r.useState)(""),d=Object(u.a)(p,2),h=d[0],_=d[1],y=function(e,t){m(s),l(re),e().then(t).then((function(){return l(ae)})).catch(w)},w=function(e){if(e.message!==g){if(e.message===O)return a([]),void l(ne);console.log(e.message),l(b)}else l(ce)};return Object(r.useEffect)((function(){y((function(){return x()}),(function(e){return a(e)}))}),[]),Object(q.jsxs)("main",{className:Q.a.App,children:[Object(q.jsx)(M,{onSubmit:function(e){y((function(){return x(e)}),(function(e){return a(e)}))}}),Object(q.jsx)(P,{onItemClick:function(e){m(s),_(n.find((function(t){return t.id===e})).largeImageURL),l(oe)},images:n}),s===ne&&Object(q.jsx)("p",{children:"There are no matching images."}),s===ae&&Object(q.jsx)(T,{onClick:function(){y(v,(function(e){return a((function(t){return[].concat(Object(o.a)(t),Object(o.a)(e))}))}))}}),s===ce&&Object(q.jsx)("p",{children:"You've reached the collection end."}),s===re&&Object(q.jsx)(Y,{color:"#3f51b5"}),s===oe&&Object(q.jsx)(te,{url:h,onClose:function(){l(b)}})]})};c.a.render(Object(q.jsx)(r.StrictMode,{children:Object(q.jsx)(ue,{})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.8d435eac.chunk.js.map